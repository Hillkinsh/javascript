<html> 
  <head> 
        <meta charset="utf-8"> 
        <title>比例尺</title> 
  </head> 
    <body> 
        <script src="d3.min.js" charset="utf-8"></script> 
        <!-- <script src="https://d3js.org/d3-array.v1.min.js"></script>
        <script src="https://d3js.org/d3-color.v1.min.js"></script>
        <script src="https://d3js.org/d3-format.v1.min.js"></script>
        <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
        <script src="https://d3js.org/d3-time.v1.min.js"></script>
        <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
        <script src="https://d3js.org/d3-scale.v2.min.js"></script> -->
        <script>  
        var width = 300;
        var height = 300;
        var svg = d3.select('body')
          .append('svg')
          .attr('width', width).attr('height', height);


        // 线性映射
        var dataset = [0, 1, 2, 3, 4];
        var min = d3.min(dataset);
        var max = d3.max(dataset);

        var linear = d3.scaleLinear()
          .domain([min, max])
          .range([30, 300]);

        // 序数比例尺

        var base = [0, 1, 2, 3, 4];
        var mapOrange = ["red", "blue", "green", "yellow", "black"];
        var color = d3.scaleOrdinal()
          .domain(base)
          .range(mapOrange)


        var rectHeight = 25;

        svg.selectAll('rect')
          .data(dataset)
          .enter()
          .append('rect')
          .attr('y', (d, i)=> i * rectHeight)
          .attr('x', 20)
          .attr("width", d => linear(d))   //在这里用比例尺)
          .attr("height",rectHeight-2)
          .attr('fill', (d,i) =>color(i));

        </script> 
    </body> 
</html>